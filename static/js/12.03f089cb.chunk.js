(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[12],{275:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return r}))},277:function(e,t,n){"use strict";var a=n(4);a.oneOfType([a.shape({Features:a.object.isRequired,Hashes:a.array.isRequired,Name:a.string.isRequired,Precision:a.number.isRequired,String:a.string.isRequired}),a.object]),a.shape({remoteName:a.string.isRequired,remotePath:a.string.isRequired}),a.string,a.bool,a.bool,a.shape({Path:a.string.isRequired,Name:a.string.isRequired,Size:a.number,MimeType:a.string,ModTime:a.string.isRequired,IsDir:a.bool.isRequired}),a.shape({rate:a.string.isRequired})},278:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"l",(function(){return c})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"n",(function(){return b})),n.d(t,"m",(function(){return f})),n.d(t,"e",(function(){return y}));var a=n(2),r=n(282);const o=(e,t,n)=>r=>{r({type:a.j,remoteName:t,id:e,remotePath:n}),r(i(e))},s=(e,t)=>n=>{n({type:a.k,remoteName:t,id:e,remotePath:""}),n(i(e))},i=e=>(t,n)=>{const a=n().explorer.currentPaths[e],o=a.remoteName,s=a.remotePath;o&&""!==o&&t(Object(r.e)(o,s))},l=(e,t)=>n=>{n({type:a.l,id:e,remotePath:t}),n(i(e))},u=e=>t=>{t({type:a.q,id:e})},c=e=>t=>{t({type:a.I,id:e})},m=e=>t=>{t({type:a.F,id:e}),t(i(e))},d=e=>t=>{t({type:a.E,id:e}),t(i(e))},p=e=>t=>{t({type:a.D,id:e}),t(i(e))},h=(e,t)=>n=>{n({type:a.o,id:e,filter:t})},g=(e,t)=>n=>{n({type:a.f,id:e,mode:t})},b=(e,t)=>n=>{n({type:a.m,id:e,searchQuery:t})},f=(e,t)=>n=>{n({type:a.i,id:e,payload:t})},y=(e,t,n)=>r=>{r({type:a.n,id:e,payload:{sortFilter:t,sortFilterAscending:n}})}},282:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return m})),n.d(t,"h",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));var a=n(2),r=n(60),o=n(278),s=n(279);const i=e=>t=>{Object(s.getRemoteInfo)(e).then(n=>{t({type:a.v,status:a.L,payload:{[e.split(":")[0]]:n}})},e=>t({type:a.v,status:a.J,payload:e}))},l=()=>(e,t)=>{const n=t();(!n.remote.remotes||n.remote.remotes.length<1)&&Object(s.getAllRemoteNames)().then(t=>e({type:a.A,status:a.L,payload:t.remotes}),t=>e({type:a.A,status:a.J,payload:t}))},u=(e,t)=>n=>{if(""!==e){const r="".concat(e,"-").concat(t);Object(s.getFilesList)(e,t).then(e=>n({type:a.w,status:a.L,payload:{path:r,filesList:e.list}}),e=>n({type:a.w,status:a.J,payload:{path:r,error:e}}))}},c=(e,t)=>n=>{if(!e||e<0)throw new Error("Invalid number of cols:".concat(e));n({type:a.h,payload:{numCols:e,mode:t}})},m=e=>t=>{const n=Object(r.l)(3);t(Object(o.g)(n)),t(p(n,e)),t({type:a.a,payload:{containerID:n,paneID:e}})},d=(e,t)=>n=>{n(Object(o.l)(e)),n({type:a.G,payload:{containerID:e,paneID:t}})},p=(e,t)=>n=>{n({type:a.b,payload:{containerID:e,paneID:t}})},h=e=>t=>{t({type:a.e,payload:e})}},291:function(e,t,n){"use strict";var a=n(7),r=n(10),o=n(273),s=n(16),i=n(0),l=n.n(i),u=n(4),c=n.n(u),m=n(24),d=n.n(m),p=n(27),h={children:c.a.node,inline:c.a.bool,tag:p.q,innerRef:c.a.oneOfType([c.a.object,c.a.func,c.a.string]),className:c.a.string,cssModule:c.a.object},g=function(e){function t(t){var n;return(n=e.call(this,t)||this).getRef=n.getRef.bind(Object(o.a)(n)),n.submit=n.submit.bind(Object(o.a)(n)),n}Object(s.a)(t,e);var n=t.prototype;return n.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},n.submit=function(){this.ref&&this.ref.submit()},n.render=function(){var e=this.props,t=e.className,n=e.cssModule,o=e.inline,s=e.tag,i=e.innerRef,u=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),c=Object(p.m)(d()(t,!!o&&"form-inline"),n);return l.a.createElement(s,Object(a.a)({},u,{ref:i,className:c}))},t}(i.Component);g.propTypes=h,g.defaultProps={tag:"form"},t.a=g},337:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(327),s=n.n(o);const i=(e,t)=>{const n=t.trim().toLowerCase(),a=n.length;return 0===a?e:0===a?[]:e.filter(e=>e.toLowerCase().slice(0,a)===n)},l=e=>e,u=e=>r.a.createElement("div",null,e);class c extends r.a.Component{constructor(e){super(e),this.onSuggestionsFetchRequested=({value:e})=>{this.setState({suggestions:i(this.props.suggestions,e)})},this.onSuggestionsClearRequested=()=>{this.setState({suggestions:[]})},this.state={suggestions:[]}}render(){const e=this.props,t={placeholder:"Type the name of remote you want to open",value:e.value,onChange:e.onChange};return r.a.createElement(s.a,{suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:l,renderSuggestion:u,highlightFirstSuggestion:!0,inputProps:t,style:{width:"100%"}})}}var m=c,d=n(84),p=n(282),h=n(278),g=n(291),b=n(52),f=n(293);n(277);class y extends r.a.Component{constructor(e){super(e),this.shouldUpdateRemoteName=(e,{newValue:t})=>{0===t.indexOf("/")?this.setState({remoteName:t,openButtonText:"Open local path"}):this.setState({remoteName:t,openButtonText:"Open"})},this.openRemote=e=>{e.preventDefault();(0,this.props.handleChangeRemoteName)(this.state.remoteName)},this.state={isEmpty:!1,remoteName:e.remoteName,openEnabled:!1,openButtonText:"Open"}}componentDidMount(){this.props.getRemoteNames()}render(){const e=this.state,t=e.isEmpty,n=e.remoteName,a=this.props.remotes;return this.props.hasError?r.a.createElement("div",null,"Error loading remotes. Please try again."):t?r.a.createElement("div",null,"Add some remotes to see them here ",r.a.createElement("span",{role:"img","aria-label":"sheep"},"\ud83d\udc11"),"."):r.a.createElement(g.a,{onSubmit:this.openRemote,className:"row"},r.a.createElement(b.a,{xs:12,sm:10,lg:10},r.a.createElement(m,{value:n,onChange:this.shouldUpdateRemoteName,suggestions:a})),r.a.createElement(b.a,{xs:12,sm:2,lg:2},r.a.createElement(f.a,{className:"btn-lg",color:"success"},this.state.openButtonText)))}}y.defaultProps={};t.a=Object(d.b)((e,t)=>({remotes:e.remote.remotes,hasError:!1,error:e.remote.error,currentPath:e.explorer.currentPaths[t.containerID]}),{getRemoteNames:p.g,getFsInfo:p.f,changeRemoteName:h.c})(y)},368:function(e,t,n){"use strict";var a=n(7),r=n(10),o=n(0),s=n.n(o),i=n(4),l=n.n(i),u=n(24),c=n.n(u),m=n(27),d={children:l.a.node,tag:m.q,className:l.a.string,cssModule:l.a.object,valid:l.a.bool,tooltip:l.a.bool},p={tag:"div",valid:void 0},h=function(e){var t=e.className,n=e.cssModule,o=e.valid,i=e.tooltip,l=e.tag,u=Object(r.a)(e,["className","cssModule","valid","tooltip","tag"]),d=i?"tooltip":"feedback",p=Object(m.m)(c()(t,o?"valid-"+d:"invalid-"+d),n);return s.a.createElement(l,Object(a.a)({},u,{className:p}))};h.propTypes=d,h.defaultProps=p,t.a=h},369:function(e,t,n){"use strict";var a=n(7),r=n(10),o=n(0),s=n.n(o),i=n(4),l=n.n(i),u=n(24),c=n.n(u),m=n(27),d={className:l.a.string,cssModule:l.a.object,size:l.a.string,bordered:l.a.bool,borderless:l.a.bool,striped:l.a.bool,dark:l.a.bool,hover:l.a.bool,responsive:l.a.oneOfType([l.a.bool,l.a.string]),tag:m.q,responsiveTag:m.q,innerRef:l.a.oneOfType([l.a.func,l.a.string,l.a.object])},p=function(e){var t=e.className,n=e.cssModule,o=e.size,i=e.bordered,l=e.borderless,u=e.striped,d=e.dark,p=e.hover,h=e.responsive,g=e.tag,b=e.responsiveTag,f=e.innerRef,y=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(m.m)(c()(t,"table",!!o&&"table-"+o,!!i&&"table-bordered",!!l&&"table-borderless",!!u&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),n),E=s.a.createElement(g,Object(a.a)({},y,{ref:f,className:v}));if(h){var N=Object(m.m)(!0===h?"table-responsive":"table-responsive-"+h,n);return s.a.createElement(b,{className:N},E)}return E};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},t.a=p},669:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(84),s=n(83),i=n(52),l=n(293),u=n(369),c=n(61),m=n(42),d=n(2);const p=()=>e=>{c.a.post(m.a.listMounts).then(t=>{console.log(t),e({type:d.x,status:d.L,payload:t.data})},t=>{e({type:d.x,status:d.J,payload:t})})};var h=n(275),g=n(670),b=n(654),f=n(655),y=n(366),v=n(367),E=n(368),N=n(287),j=n(656),O=n(337);var R=e=>{const t=e.buttonLabel,n=e.className,o=e.okHandle,s=Object(a.useState)(!1),u=Object(h.a)(s,2),c=u[0],m=u[1],d=Object(a.useState)(""),p=Object(h.a)(d,2),R=p[0],M=p[1],w=Object(a.useState)(""),C=Object(h.a)(w,2),P=C[0],S=C[1],q=()=>m(!c);return r.a.createElement("div",{"data-test":"newMountModalComponent"},r.a.createElement(l.a,{color:"primary",onClick:q},t),r.a.createElement(g.a,{isOpen:c,toggle:q,className:n},r.a.createElement(b.a,{toggle:q},"New Mount"),r.a.createElement(f.a,null,r.a.createElement(y.a,{row:!0},r.a.createElement(v.a,{for:"mountFs",sm:5},"Fs"),r.a.createElement(i.a,{sm:7},r.a.createElement(O.a,{remoteName:R,handleChangeRemoteName:M}),r.a.createElement(E.a,null))),R&&r.a.createElement(y.a,{row:!0},r.a.createElement(v.a,{for:"mountPoint",sm:5},"Mount Point"),r.a.createElement(i.a,{sm:7},r.a.createElement(N.a,{type:"text",value:P,name:"mountPoint",id:"mountPoint",onChange:e=>S(e.target.value),required:!0}),r.a.createElement(E.a,null)))),r.a.createElement(j.a,null,r.a.createElement(l.a,{"data-test":"ok-button",color:"primary",onClick:()=>{if(!o)throw new Error("Ok handle is null");o(R,P)},disabled:!R||!P},"Create")," ",r.a.createElement(l.a,{"data-test":"cancel-button",color:"secondary",onClick:q},"Cancel"))))};class M extends r.a.Component{constructor(e,t){super(e,t),this.handleRemoveMount=e=>{(0,this.props.unmount)(e.MountPoint)},this.handleCreateNewMount=(e,t)=>{(0,this.props.addMount)(e,t,"")},this.handleUnmountAll=()=>{(0,this.props.unmountAll)()},this.state={showNewMountCard:!1}}componentDidMount(){(0,this.props.getMountList)()}render(){const e=this.props.currentMounts;return r.a.createElement("div",{"data-test":"mountDashboardComponent"},r.a.createElement(s.a,null,r.a.createElement(i.a,{lg:12,className:"mb-4 d-flex justify-content-between"},r.a.createElement(R,{buttonLabel:"Create new mount",okHandle:this.handleCreateNewMount}),r.a.createElement(l.a,{className:"float-right",color:"danger",onClick:this.handleUnmountAll},"Unmount all"))),r.a.createElement(u.a,{responsive:!0,className:"table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No."),r.a.createElement("th",null,"Mount Point"),r.a.createElement("th",null,"Mounted since"),r.a.createElement("th",null,"Fs"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,e&&e.map((e,t)=>r.a.createElement("tr",{key:e.MountPoint},r.a.createElement("td",null,t),r.a.createElement("td",null,e.MountPoint),r.a.createElement("td",null,new Date(e.MountedOn).toLocaleTimeString()),r.a.createElement("td",null,e.Fs),r.a.createElement("td",null,r.a.createElement(l.a,{color:"danger",onClick:()=>this.handleRemoveMount(e)},"Unmount")))))))}}t.default=Object(o.b)(e=>({currentMounts:e.mount.currentMounts}),{getMountList:p,addMount:(e,t,n)=>{e.endsWith(":")||(e+=":");const a=d.p;return r=>{c.a.post(m.a.createMount,{fs:e,mountPoint:t,mountType:n}).then(e=>{r({type:a,status:d.L,payload:e.data})},e=>{r({type:a,status:d.J,payload:e})}),r(p())}},unmount:e=>{const t=d.H;return n=>{c.a.post(m.a.removeMount,{mountPoint:e}).then(e=>{n({type:t,status:d.L,payload:e.data})},e=>{n({type:t,status:d.J,payload:e})}),n(p())}},unmountAll:()=>{const e=d.H;return t=>{c.a.post(m.a.unmountAll).then(n=>{t({type:e,status:d.L,payload:n.data})},n=>{t({type:e,status:d.J,payload:n})}),t(p())}}})(M)}}]);
//# sourceMappingURL=12.03f089cb.chunk.js.map