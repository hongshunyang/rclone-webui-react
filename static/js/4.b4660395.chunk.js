(this["webpackJsonp@rclone/rclone-webui-react"]=this["webpackJsonp@rclone/rclone-webui-react"]||[]).push([[4],{347:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(300),l=a(527),c=a(301),o=a(293),i=a(29),u=a.n(i),d=a(408),m=a(84),p=a(365),b=a(35);function E(){return u.a.createPortal(r.a.createElement(d.a,{mode:"modal"}),document.getElementById(b.d))}class g extends r.a.Component{constructor(...e){super(...e),this.toggleCheckStatus=()=>{const e=this.props,t=e.checkStatus,a=e.enableCheckStatus;console.log(t,a),a(!t)}}componentDidMount(){this.props.getStatus(),this.refreshInterval=setInterval(()=>this.props.getStatus(),b.f)}componentWillUnmount(){clearInterval(this.refreshInterval)}render(){const e=this.props,t=e.isConnected,a=e.mode,n=e.checkStatus,i=localStorage.getItem(b.c),u=localStorage.getItem(b.g);return"card"===a?r.a.createElement(s.a,{className:"text-center "+(t?"card-accent-info":"card-accent-warning")},r.a.createElement(l.a,null,"Overview"),r.a.createElement(c.a,null,r.a.createElement(h,{checkStatus:n,connectivityStatus:t,ipAddress:i,userName:u}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{type:"primary",onClick:this.toggleCheckStatus,className:t?"bg-info  d-none d-lg-block":"bg-warning d-none d-lg-block"}," ",n?t?"CONNECTED":"DISCONNECTED":"DISABLED"),r.a.createElement(E,null))}}function h({connectivityStatus:e,checkStatus:t,ipAddress:a,userName:n}){let s="";return s=t?e?"rClone Backend is connected and working as expected":"Cannot connect to rclone backend. There is a problem with connecting to {ipAddress}.":"Not monitoring connectivity status. Tap the icon in navbar to start.",r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("span",{className:"card-subtitle"},"Status: "," "),r.a.createElement("span",{className:"card-text"},s)),r.a.createElement("p",null,r.a.createElement("span",{className:"card-subtitle"},"Current IP Address: "," "),r.a.createElement("span",{className:"card-text"},a)),r.a.createElement("p",null,r.a.createElement("span",{className:"card-subtitle"},"Username: "," "),r.a.createElement("span",{className:"card-text"},n)))}g.defaultProps={mode:"card"};t.a=Object(m.b)(e=>({isConnected:e.status.isConnected,isDisabled:e.status.isDisabled,checkStatus:e.status.checkStatus}),{getStatus:p.c,enableCheckStatus:p.a})(g)},365:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return d}));var n=a(62),r=a.n(n),s=a(87),l=a(2),c=a(279);const o=()=>function(){var e=Object(s.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),n.status.checkStatus&&Object(c.getStats)().then(e=>t({type:l.s,status:l.L,payload:e}),e=>t({type:l.s,status:l.J,payload:e}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),i=e=>function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:l.r,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=()=>function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.getCurrentBandwidthSetting)().then(e=>t({type:l.t,status:l.L,payload:e}),e=>t({type:l.t,status:l.J,payload:e}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=e=>function(){var t=Object(s.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(c.setCurrentBandwidthSetting)(e).then(e=>a({type:l.M,status:l.L,payload:e}),e=>a({type:l.M,status:l.J,payload:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},408:function(e,t,a){"use strict";var n=a(275),r=a(0),s=a.n(r),l=a(300),c=a(527),o=a(301),i=a(7),u=a(10),d=a(4),m=a.n(d),p=a(24),b=a.n(p),E=a(27),g={children:m.a.node,bar:m.a.bool,multi:m.a.bool,tag:E.q,value:m.a.oneOfType([m.a.string,m.a.number]),max:m.a.oneOfType([m.a.string,m.a.number]),animated:m.a.bool,striped:m.a.bool,color:m.a.string,className:m.a.string,barClassName:m.a.string,cssModule:m.a.object},h=function(e){var t=e.children,a=e.className,n=e.barClassName,r=e.cssModule,l=e.value,c=e.max,o=e.animated,d=e.striped,m=e.color,p=e.bar,g=e.multi,h=e.tag,f=Object(u.a)(e,["children","className","barClassName","cssModule","value","max","animated","striped","color","bar","multi","tag"]),v=Object(E.s)(l)/Object(E.s)(c)*100,N=Object(E.m)(b()(a,"progress"),r),y=Object(E.m)(b()("progress-bar",p&&a||n,o?"progress-bar-animated":null,m?"bg-"+m:null,d||o?"progress-bar-striped":null),r),O=g?t:s.a.createElement("div",{className:y,style:{width:v+"%"},role:"progressbar","aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":c,children:t});return p?O:s.a.createElement(h,Object(i.a)({},f,{className:N,children:O}))};h.propTypes=g,h.defaultProps={tag:"div",value:0,max:100};var f=h,v=a(83),N=a(52),y=a(269),O=a(293),C=a(528),S=a(60),j=a(84),x=a(348),k=a(526),T=a(61),w=a(42),I=a(36);const A={tooltips:{enabled:!1,custom:k.CustomTooltips},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{ticks:{display:!1}}]}};function D({job:e}){const t=e.name,a=e.eta,n=e.percentage,r=e.speed,i=e.speedAvg,u=e.size,d=e.bytes;return t&&!isNaN(r)?s.a.createElement(l.a,null,s.a.createElement(c.a,null,"Running Jobs"),s.a.createElement(o.a,null,s.a.createElement("p",null,t)," ",s.a.createElement(f,{value:n,className:"mb-2"},n," %")," ",s.a.createElement("p",null,s.a.createElement("strong",null,"Speed: "),Object(S.g)(r),"PS")," ",s.a.createElement("p",null,s.a.createElement("strong",null,"Average Speed: "),Object(S.g)(i),"PS")," ",s.a.createElement("p",null,s.a.createElement("strong",null,"Total transferred: "),Object(S.g)(d))," ",s.a.createElement("p",null,s.a.createElement("strong",null,"Size: "),Object(S.g)(u)),s.a.createElement("p",null,s.a.createElement("strong",null,"ETA: "),Object(S.m)(a)))):null}function P({job:e}){const t=e.name,a=e.percentage,n=e.speed,r=e.size;return s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{className:"runningJobs"},r&&n?s.a.createElement(N.a,{lg:12,className:"itemName"}," ",function(e){if(e.length>30){return e.substr(0,30)+" ... "+e.substr(-5)}return e}(t)," "," ","(",Object(S.g)(r),") - ",Object(S.g)(n),"PS "):s.a.createElement(N.a,{lg:12},"Calculating")),s.a.createElement(v.a,null,s.a.createElement(N.a,{lg:12},s.a.createElement(f,{value:a,className:"mb-2"},a," %"))))}function B({stats:e}){const t=e.speed,a=e.bytes,n=e.checks,r=e.elapsedTime,i=e.deletes,u=e.errors,d=e.transfers,m=e.lastError;return s.a.createElement(l.a,null,s.a.createElement(c.a,null,s.a.createElement("strong",null,"Global Stats")),s.a.createElement(o.a,null,s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Bytes Transferred:"),s.a.createElement("td",{className:"card-text"},Object(S.g)(a))),s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Average Speed:"),s.a.createElement("td",{className:"card-text"},Object(S.g)(t),"PS")),s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Checks:"),s.a.createElement("td",{className:"card-text"},n)),s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Deletes:"),s.a.createElement("td",{className:"card-text"},i)),s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Running since:"),s.a.createElement("td",{className:"card-text"},Object(S.m)(r))),s.a.createElement("tr",{className:u>0?"table-danger":""},s.a.createElement("td",{className:"card-subtitle"},"Errors:"),s.a.createElement("td",{className:"card-text"},u)),s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Transfers:"),s.a.createElement("td",{className:"card-text"},d)),s.a.createElement("tr",null,s.a.createElement("td",{className:"card-subtitle"},"Last Error:"),s.a.createElement("td",{className:"card-text"},m))))))}function H({transferring:e}){return void 0!==e?e.map((e,t)=>s.a.createElement(D,{key:e.name,job:e})):null}function L({transferring:e}){if(void 0!==e){const t=Object(S.i)(e,e=>e.group),a=[];return t.forEach((e,t)=>{a.push(s.a.createElement(M,{job:e,groupId:t,key:t}))}),a}return null}function M({job:e,groupId:t}){const a=Object(r.useState)(!1),i=Object(n.a)(a,2),u=i[0],d=i[1],m=Object(r.useState)(!0),p=Object(n.a)(m,2),b=p[0],E=p[1];return e?s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(l.a,null,s.a.createElement(c.a,{onClick:()=>d(!u)},s.a.createElement(y.a,null,s.a.createElement(v.a,null,s.a.createElement(N.a,{sm:10},"Transferring ",e.length," file(s)"),s.a.createElement(N.a,{sm:2},s.a.createElement(O.a,{color:"light",disabled:!b,onClick:e=>((e,t)=>{if(e.stopPropagation(),t&&-1!==t.indexOf("/")){E(!1);const e=t.split("/")[1];T.a.post(w.a.stopJob,{jobid:e,_async:!0}).then((function(t){I.b.info("Job ".concat(e," stopped"))})).catch(t=>{I.b.error("Job ".concat(e," couldn't be stopped"))})}})(e,t),className:"btn-outline-danger btn-pill"},s.a.createElement("i",{className:"fa fa-close fa-sm"})))))),s.a.createElement(C.a,{isOpen:u},s.a.createElement(o.a,null,e.map((e,t)=>s.a.createElement(P,{key:e.name,job:e})))))):null}class R extends s.a.Component{constructor(e,t){super(e,t),this.toggleShowing=()=>{this.setState(e=>({isShowing:!e.isShowing}))},this.state={isShowing:!0}}render(){const e=this.props,t=e.jobs,a=e.isConnected,n=e.lineChartData,r=t.transferring,i=this.props.mode;return"full-status"===i?a?s.a.createElement(v.a,null,s.a.createElement(N.a,{sm:12,lg:6},s.a.createElement(B,{stats:t})),s.a.createElement(N.a,{sm:12,lg:6},s.a.createElement(l.a,null,s.a.createElement(c.a,null,"Speed"),s.a.createElement(o.a,null,s.a.createElement("div",{className:"chart-wrapper"},s.a.createElement(x.b,{data:n,options:A}))))),s.a.createElement(N.a,{sm:12,lg:4},s.a.createElement(H,{transferring:r}))):s.a.createElement("div",null,"Not connected to rclone."):"card"===i?a?s.a.createElement(L,{transferring:r}):s.a.createElement("div",null,"Not connected to rclone."):"modal"===i?r&&r.length>0?s.a.createElement(l.a,{className:"progress-modal d-none d-sm-block"},s.a.createElement(c.a,{onClick:()=>this.toggleShowing()},"Progress",s.a.createElement("div",{className:"card-header-actions"},s.a.createElement(O.a,{color:"link"},s.a.createElement("i",{className:"fa fa-close fa-lg"})))),s.a.createElement(o.a,{className:this.state.isShowing?"progress-modal-body":"d-none",style:{overflowY:"scroll"}},s.a.createElement(L,{transferring:r}))):null:void 0}}t.a=Object(j.b)((e,t)=>{const a=e.status.speed;let n={};if(a){let e=[],t=[],r=[];const s=a.length;a.slice(s-50,s-1).forEach((a,n)=>{e.push(Math.ceil(a.elapsedTime)),t.push(Object(S.c)(a.speed).toFixed(2)),r.push(Object(S.c)(a.speedAvg).toFixed(2))}),n={labels:e,datasets:[{label:"Speed (kbps)",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:t},{label:"Average Speed (kbps)",fill:!0,lineTension:.1,backgroundColor:"rgba(187,69,14,0.4)",borderColor:"rgb(192,76,58)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgb(187,69,14)",pointBackgroundColor:"#ff7459",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:r}]}}return{jobs:e.status.jobs,isConnected:e.status.isConnected,error:e.status.error,lineChartData:n}},{})(R)},526:function(e,t,a){!function(e){"use strict";function t(e){var t=this,a="above",n="below",r="chartjs-tooltip",s="no-transform",l="tooltip-body",c="tooltip-body-item",o="tooltip-body-item-color",i="tooltip-body-item-label",u="tooltip-body-item-value",d="tooltip-header",m="tooltip-header-item",p={DIV:"div",SPAN:"span",TOOLTIP:(this._chart.canvas.id||function(){var e=function(){return(65536*(1+Math.random())|0).toString(16)},a="_canvas-"+(e()+e());return t._chart.canvas.id=a,a}())+"-tooltip"},b=document.getElementById(p.TOOLTIP);if(b||((b=document.createElement("div")).id=p.TOOLTIP,b.className=r,this._chart.canvas.parentNode.appendChild(b)),0!==e.opacity){if(b.classList.remove(a,n,s),e.yAlign?b.classList.add(e.yAlign):b.classList.add(s),e.body){var E=e.title||[],g=document.createElement(p.DIV);g.className=d,E.forEach((function(e){var t=document.createElement(p.DIV);t.className=m,t.innerHTML=e,g.appendChild(t)}));var h=document.createElement(p.DIV);h.className=l,e.body.map((function(e){return e.lines})).forEach((function(t,a){var n=document.createElement(p.DIV);n.className=c;var r=e.labelColors[a],s=document.createElement(p.SPAN);if(s.className=o,s.style.backgroundColor=r.backgroundColor,n.appendChild(s),t[0].split(":").length>1){var l=document.createElement(p.SPAN);l.className=i,l.innerHTML=t[0].split(": ")[0],n.appendChild(l);var d=document.createElement(p.SPAN);d.className=u,d.innerHTML=t[0].split(": ").pop(),n.appendChild(d)}else{var m=document.createElement(p.SPAN);m.className=u,m.innerHTML=t[0],n.appendChild(m)}h.appendChild(n)})),b.innerHTML="",b.appendChild(g),b.appendChild(h)}var f=this._chart.canvas.getBoundingClientRect(),v=this._chart.canvas.offsetTop,N=this._chart.canvas.offsetLeft+e.caretX,y=v+e.caretY,O=e.width/2;N+O>f.width?N-=O:N<O&&(N+=O),b.style.opacity=1,b.style.left=N+"px",b.style.top=y+"px"}else b.style.opacity=0}var a=t;e.CustomTooltips=t,e.customTooltips=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},528:function(e,t,a){"use strict";var n,r=a(7),s=a(10),l=a(273),c=a(16),o=a(276),i=a(0),u=a.n(i),d=a(4),m=a.n(d),p=a(24),b=a.n(p),E=a(302),g=a(27),h=Object(o.a)({},E.Transition.propTypes,{isOpen:m.a.bool,children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),tag:g.q,className:m.a.node,navbar:m.a.bool,cssModule:m.a.object,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])}),f=Object(o.a)({},E.Transition.defaultProps,{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:g.e.Collapse}),v=((n={})[g.d.ENTERING]="collapsing",n[g.d.ENTERED]="collapse show",n[g.d.EXITING]="collapsing",n[g.d.EXITED]="collapse",n);function N(e){return e.scrollHeight}var y=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){a[e]=a[e].bind(Object(l.a)(a))})),a}Object(c.a)(t,e);var a=t.prototype;return a.onEntering=function(e,t){this.setState({height:N(e)}),this.props.onEntering(e,t)},a.onEntered=function(e,t){this.setState({height:null}),this.props.onEntered(e,t)},a.onExit=function(e){this.setState({height:N(e)}),this.props.onExit(e)},a.onExiting=function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)},a.onExited=function(e){this.setState({height:null}),this.props.onExited(e)},a.render=function(){var e=this,t=this.props,a=t.tag,n=t.isOpen,l=t.className,c=t.navbar,i=t.cssModule,d=t.children,m=(t.innerRef,Object(s.a)(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),p=this.state.height,h=Object(g.o)(m,g.c),f=Object(g.n)(m,g.c);return u.a.createElement(E.Transition,Object(r.a)({},h,{in:n,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var n=function(e){return v[e]||"collapse"}(t),s=Object(g.m)(b()(l,n,c&&"navbar-collapse"),i),m=null===p?null:{height:p};return u.a.createElement(a,Object(r.a)({},f,{style:Object(o.a)({},f.style,{},m),className:s,ref:e.props.innerRef}),d)}))},t}(i.Component);y.propTypes=h,y.defaultProps=f,t.a=y}}]);
//# sourceMappingURL=4.b4660395.chunk.js.map